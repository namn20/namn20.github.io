---
layout: post
title:  "Windows κ²μ„ μ„λ²„ λ°°ν¬ μ‹ config.json λ―Όκ° μ •λ³΄ λ³΄νΈ κ°€μ΄λ“"
date:   2026-01-18
categories: [DevOps, Security]
tags: [Windows, GameServer, Security, ACL, EFS]
---

# π›΅οΈ Windows κ²μ„ μ„λ²„ λ°°ν¬ μ‹ config.json λ―Όκ° μ •λ³΄ λ³΄νΈ κ°€μ΄λ“

κ²μ„ νΌλΈ”λ¦¬μ‹±μ΄λ‚ μ„λ²„ μ΄μμ„ ν•λ‹¤ λ³΄λ©΄ κ°€μ¥ ν”ν•κ² λ§μ£ΌμΉλ” λ³΄μ• μ΄μκ°€ λ°”λ΅ **μ„¤μ • νμΌ(`config.json`, `.env`, `xml` λ“±) λ‚΄μ λ―Όκ° μ •λ³΄ λ…Έμ¶** λ¬Έμ μ…λ‹λ‹¤.

Windows Server ν™κ²½μ—μ„ `gameserver.exe`μ™€ κ°™μ€ μ‹¤ν–‰ νμΌ λ°©μ‹μ μ„λ²„λ¥Ό λ°°ν¬ν•  λ•, DB μ ‘μ† μ •λ³΄λ‚ API Keyκ°€ ν¬ν•¨λ μ„¤μ • νμΌμ„ μ–΄λ–»κ² λ³΄νΈν•΄μ•Ό ν• κΉμ”?

μ΄ κΈ€μ—μ„λ” **μ†μ¤ μ½”λ“ μμ •μ΄ λ¶κ°€λ¥ν• κ²½μ°(μ΄μ μ΅°μΉ)**μ™€ **κ°€λ¥ν• κ²½μ°(κ°λ° μ΅°μΉ)**λ΅ λ‚λ„μ–΄ μ‹¤μ§μ μΈ ν•΄κ²° λ°©λ²•μ„ μ •λ¦¬ν–μµλ‹λ‹¤.

---

## π« λ¬Έμ  μƒν™©

λ€λ¶€λ¶„μ κ²μ„ μ„λ²„λ” μ‹¤ν–‰ μ‹ `config.json` νμΌμ„ μ½μ–΄ λ°μ΄ν„°λ² μ΄μ¤μ— μ ‘μ†ν•κ±°λ‚ μ™Έλ¶€ APIλ¥Ό νΈμ¶ν•©λ‹λ‹¤.

```json
// μ„ν—ν• config.json μμ‹
{
  "Database": {
    "Host": "192.168.1.10",
    "User": "sa",
    "Password": "MySuperSecretPassword123!" // π¨ ν‰λ¬Έ λ…Έμ¶ μ„ν—!
  },
  "ApiKey": "sk_live_1234567890"
}
```

μ΄ νμΌμ΄ ν‰λ¬ΈμΌλ΅ μ €μ¥λμ–΄ μλ‹¤λ©΄, μ„λ²„μ— μ ‘κ·Όν•  μ μλ” λ„κµ¬λ“ (ν•΄μ»¤, μ•…μμ μΈ λ‚΄λ¶€μ, κ¶ν•μ΄ νƒμ·¨λ λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤ λ“±) μ΄ μ •λ³΄λ¥Ό λ³Ό μ μκ² λ©λ‹λ‹¤.

---

## π—οΈ 1. μ†μ¤ μ½”λ“ μμ •μ΄ λ¶κ°€λ¥ν• κ²½μ° (μΈν”„λΌ/μ΄μ λ λ²¨)

μ΄λ―Έ λΉλ“λ `gameserver.exe`λ¥Ό λ°°ν¬λ§ ν•΄μ•Ό ν•λ” μƒν™©μ΄λΌλ©΄ **Windows OS μμ²΄μ λ³΄μ• κΈ°λ¥**μ„ ν™μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

### A. μ•μ‹¬ν•  μ μλ” μ²«κ±Έμ: νμΌ κ¶ν•(ACL) μ ν•

Windowsμ NTFS νμΌ μ‹μ¤ν… κ¶ν•μ„ μ‚¬μ©ν•μ—¬, κ²μ„ μ„λ²„λ¥Ό μ‹¤ν–‰ν•λ” **νΉμ • κ³„μ •** μ™Έμ—λ” νμΌμ„ μ λ€ μ—΄μ–΄λ³Ό μ μ—†κ² λ§‰μµλ‹λ‹¤.

#### π“ μ μ© λ°©λ²• (GUI)
1. **μ „μ© κ³„μ • μƒμ„±**: κ²μ„ μ„λ²„ κµ¬λ™μ„ μ„ν• λ³„λ„ μλ„μ° κ³„μ •(μ: `GameSvcUser`)μ„ μƒμ„±ν•©λ‹λ‹¤. (Administrator κ¶ν• λ¶€μ—¬ X)
2. `config.json` νμΌ μ°ν΄λ¦­ -> **[μ†μ„±]** -> **[λ³΄μ•]** νƒ­ -> **[κ³ κΈ‰]** ν΄λ¦­.
3. **[μƒμ† μ‚¬μ© μ• ν•¨]** ν΄λ¦­ -> "μƒμ†λ μ‚¬μ© κ¶ν•μ„ μ΄ κ°μ²΄μ— λ€ν• λ…μ‹μ  μ‚¬μ© κ¶ν•μΌλ΅ λ³€ν™ν•©λ‹λ‹¤" μ„ νƒ.
4. λ¶ν•„μ”ν• κ³„μ •(Users, Guest λ“±)μ„ λ¨λ‘ **μ κ±°**ν•©λ‹λ‹¤.
5. **[μ¶”κ°€]** -> `GameSvcUser` μ„ νƒ -> **"μ½κΈ° λ° μ‹¤ν–‰"** κ¶ν•λ§ λ¶€μ—¬ν•©λ‹λ‹¤.
6. κ²°κ³Όμ μΌλ΅ `SYSTEM`, `Administrators`, `GameSvcUser` μ™Έμ—λ” μ ‘κ·Όμ΄ μ°¨λ‹¨λ©λ‹λ‹¤.

#### π’» μ μ© λ°©λ²• (PowerShell μ¤ν¬λ¦½νΈ)
μλ™ν™”λ λ°°ν¬λ¥Ό μ„ν•΄ PowerShellμ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

```powershell
# λ³€μ μ„¤μ •
$ConfigPath = "C:\GameServer\config.json"
$ServiceUser = "GameSvcUser"

# 1. ν„μ¬ ACL κ°€μ Έμ¤κΈ°
$Acl = Get-Acl $ConfigPath

# 2. μƒμ† λΉ„ν™μ„±ν™” λ° κΈ°μ΅΄ κ¶ν• μ κ±° μ¤€λΉ„
$Acl.SetAccessRuleProtection($true, $false) 

# 3. μƒ κ¶ν• μ„¤μ • (μ„λΉ„μ¤ κ³„μ •μ—κ² ReadAndExecute κ¶ν• λ¶€μ—¬)
$Ar = New-Object System.Security.AccessControl.FileSystemAccessRule($ServiceUser, "ReadAndExecute", "Allow")
$Acl.SetAccessRule($Ar)

# 4. κ΄€λ¦¬μ κ¶ν• μ μ§€ (μµμ… - λΉ„μƒμ‹ μ ‘κ·Όμ©)
$AdminAr = New-Object System.Security.AccessControl.FileSystemAccessRule("Administrators", "FullControl", "Allow")
$Acl.SetAccessRule($AdminAr)

# 5. κ¶ν• μ μ©
Set-Acl $ConfigPath $Acl
```

### B. κ°•λ ¥ν• λ³΄νΈ: Windows EFS (νμΌ μ‹μ¤ν… μ•”νΈν™”)

κ¶ν• μ μ–΄λ§μΌλ΅λ” λ¬Όλ¦¬μ μΈ ν•λ“ λ””μ¤ν¬ νƒμ·¨λ‚ κ΄€λ¦¬μ κ¶ν• νƒμ·¨ μ‹ νμΌμ„ λ³΄νΈν•κΈ° μ–΄λ µμµλ‹λ‹¤. **EFS(Encrypting File System)**λ¥Ό μ‚¬μ©ν•λ©΄ νμΌ μμ²΄λ¥Ό μ•”νΈν™”ν•μ—¬ μ €μ¥ν•  μ μμµλ‹λ‹¤.

*   **νΉμ§•**: μ•”νΈν™”ν• μ‚¬μ©μ(`GameSvcUser`)κ°€ λ΅κ·ΈμΈν–μ„ λ•λ§ OSκ°€ ν¬λ…ν•κ² λ³µνΈν™”ν•΄μ¤λ‹λ‹¤. λ‹¤λ¥Έ μ‚¬μ©μκ°€ νμΌμ„ μ—΄λ©΄ "μ•΅μ„Έμ¤ κ±°λ¶€"κ°€ λ°μƒν•κ±°λ‚ κΉ¨μ§„ λ°μ΄ν„°λ΅ λ³΄μ…λ‹λ‹¤.

#### π“ μ μ© λ°©λ²•
1. κ²μ„ μ„λ²„ μ‹¤ν–‰ κ³„μ •(`GameSvcUser`)μΌλ΅ Windowsμ— λ΅κ·ΈμΈν•©λ‹λ‹¤.
2. `config.json` μ°ν΄λ¦­ -> **[μ†μ„±]** -> **[μΌλ°]** -> **[κ³ κΈ‰]**.
3. **[λ°μ΄ν„° λ³΄νΈλ¥Ό μ„ν•΄ λ‚΄μ©μ„ μ•”νΈν™”]** μ²΄ν¬ ν›„ ν™•μΈ.
4. μ΄ν›„ ν•΄λ‹Ή νμΌμ€ λ…Ήμƒ‰ ν…μ¤νΈλ΅ ν‘μ‹λλ©° μ•”νΈν™”λ©λ‹λ‹¤.

---

## π‘¨β€π’» 2. μ†μ¤ μ½”λ“ μμ •μ΄ κ°€λ¥ν• κ²½μ° (κ°λ° λ λ²¨)

κ°€μ¥ κ·Όλ³Έμ μΈ ν•΄κ²°μ±…μ€ μ„¤μ • νμΌμ— λΉ„λ°€ μ •λ³΄λ¥Ό λ‚¨κΈ°μ§€ μ•λ” κ²ƒμ…λ‹λ‹¤.

### A. ν™κ²½ λ³€μ (Environment Variables) μ‚¬μ© (μ¶”μ² β­)

[The 12-Factor App](https://12factor.net/ko/config) μ›μΉ™μ— λ”°λΌ, μ„¤μ •μ€ μ½”λ“λ‚ νμΌμ΄ μ•„λ‹ **ν™κ²½(Environment)**μ— μ €μ¥ν•΄μ•Ό ν•©λ‹λ‹¤.

1. `config.json`μ—μ„λ” λΉ„λ°€λ²νΈ ν•„λ“λ¥Ό μ κ±°ν•κ±°λ‚ λΉ κ°’μΌλ΅ λ‘΅λ‹λ‹¤.
2. μ„λ²„ μ‹¤ν–‰ μ¤ν¬λ¦½νΈμ—μ„ ν™κ²½ λ³€μλ¥Ό μ£Όμ…ν•©λ‹λ‹¤.

#### C# (.NET) μ½”λ“ λ³€κ²½ μμ‹
```csharp
public class GameConfig {
    public string DbPassword { get; set; }

    public void LoadConfig() {
        // 1. νμΌμ—μ„ μ½κΈ°
        var config = ReadJsonFile("config.json");
        
        // 2. ν™κ²½ λ³€μκ°€ μλ‹¤λ©΄ λ®μ–΄μ“°κΈ° (μ°μ„ μμ„ λ†’μ)
        var envPass = Environment.GetEnvironmentVariable("GAME_DB_PASSWORD");
        if (!string.IsNullOrEmpty(envPass)) {
            config.DbPassword = envPass;
        }
    }
}
```

#### λ°°ν¬ μ‹ μ‹¤ν–‰ λ°©λ²• (PowerShell)
```powershell
$env:GAME_DB_PASSWORD = "SuperSecurePassword123!"
./gameserver.exe
```
> **ν:** CI/CD λ„κµ¬(GitLab CI, Jenkins, Github Actions)λ¥Ό μ‚¬μ©ν•λ‹¤λ©΄ λ°°ν¬ νμ΄ν”„λΌμΈμ 'Secret Variables' κΈ°λ¥μ„ ν†µν•΄ μ΄ κ°’μ„ μ•μ „ν•κ² μ£Όμ…ν•  μ μμµλ‹λ‹¤.

### B. μ„¤μ • νμΌ μ•”νΈν™” (AES)

νμΌμ„ κΌ­ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤λ©΄, λ―Όκ°ν• κ°’λ§ μ•”νΈν™”ν•μ—¬ μ €μ¥ν•©λ‹λ‹¤.

1. **λ°°ν¬ μ „:** μ•”νΈν™” ν΄μ„ μ΄μ©ν•΄ ν‰λ¬Έ λΉ„λ°€λ²νΈλ¥Ό μ•”νΈν™” λ¬Έμμ—΄λ΅ λ³€ν™ (μ: `AES256("mypassword")` -> `U2Fsd...`)
2. **μ €μ¥:** `config.json`μ— `U2Fsd...` λ¬Έμμ—΄ μ €μ¥.
3. **μ‹¤ν–‰ μ‹:** μ„λ²„ μ½”λ“κ°€ μ‹μ‘λ  λ• λ³µνΈν™” λ΅μ§ μν–‰.
    *   *μ£Όμ:* λ³µνΈν™”λ¥Ό μ„ν• 'λ§μ¤ν„° ν‚¤'λ¥Ό μ½”λ“μ— ν•λ“μ½”λ”©ν•λ©΄ μ• λ©λ‹λ‹¤. λ§μ¤ν„° ν‚¤λ” ν™κ²½ λ³€μλ‚ KMS(Key Management Service)μ—μ„ κ°€μ Έμ¤λ„λ΅ μ„¤κ³„ν•΄μ•Ό ν•©λ‹λ‹¤.

---

## π“ μ”μ•½ λ° μ²΄ν¬λ¦¬μ¤νΈ

μƒν™©μ— λ§μ¶° μ•„λ λ‹¨κ³„ μ¤‘ ν•λ‚λ¥Ό μ„ νƒν•μ—¬ μ μ©ν•μ„Έμ”.

| λ λ²¨ | λ°©λ²• | μ¶”μ² μƒν™© | λ‚μ΄λ„ | λ³΄μ• κ°•λ„ |
| :--- | :--- | :--- | :--- | :--- |
| **Level 1** | **νμΌ κ¶ν• (ACL)** | μ½”λ“ μμ • λ¶κ°€, λΉ λ¥Έ μ΅°μΉ ν•„μ” | ν• | μ¤‘ |
| **Level 2** | **ν™κ²½ λ³€μ μ‚¬μ©** | μ½”λ“ μμ • κ°€λ¥, ν‘μ¤€ν™”λ λ°°ν¬ ν™κ²½ | μ¤‘ | μƒ |
| **Level 3** | **Secret Manager** | λ€κ·λ¨ μ„λΉ„μ¤, ν΄λΌμ°λ“ ν™κ²½ | μƒ | μµμƒ |

**π€ λ°”λ΅ μ‹¤μ²ν•  μ μλ” Action Item:**
1. μ§€κΈ μ¦‰μ‹ ν”„λ΅λ•μ… μ„λ²„μ `config.json` κ¶ν•μ„ ν™•μΈν•μ„Έμ”. Everyone κ¶ν•μ΄ μλ‹¤λ©΄ λ‹Ήμ¥ μ κ±°ν•΄μ•Ό ν•©λ‹λ‹¤.
2. κ°λ°ν€κ³Ό ν‘μν•μ—¬ λ‹¤μ μ—…λ°μ΄νΈ λ•λ” λ―Όκ° μ •λ³΄λ¥Ό ν™κ²½ λ³€μλ΅ λ¶„λ¦¬ν•λ” κ²ƒμ„ μΌμ •μ— ν¬ν•¨μ‹ν‚¤μ„Έμ”.
